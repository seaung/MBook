##### TCP的三次握手

1. 请求端发送一个SYN段指明客户端打算连接服务器端的端口，以及初始序号（ISN）。这个SYN段为报文段1。
2. 服务器发回包含服务器的初始序号的SYN报文段（报文段2）作为应答。同时，将确认序号设置为客户的ISN加1以对客户的SYN报文段进行确认。一个SYN将占用一个序号。
3. 客户必须将确认序号设置为服务器的ISN加1以对服务器的SYN报文段进行确认（报文段3）

发送第一个SYN的一端将执行主动打开。接收这个SYN并回发下一个SYN的另一端执行被动打开。当一端为建立连接而发送它的SYN时，它为连接选择一个初始序号。ISN随时间变化，因此每个连接都将具有不同的ISN。

##### TCP的四次挥手

建立一个连接需要三次握手，而终止一个连接要经过四次挥手，这由TCP的半关闭造成的。一个TCP连接是全双工，因此每个方向必须单独地进行关闭。这原则就是当一方完成它的数据发送任务后就能发送一个FIN来终止这个方向连接。当一端收到一个FIN，它必须通知应用层另一端几经终止了那个方向的数据传送。发送FIN通常是应用层进行关闭的结果。受到一个FIN之意味着在这一方向没有数据流动。一个TCP连接在收到一个FIN后仍能发送数据。

![TCP FIN](./imgs/tcp-fin.png)





---

that's all